<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["setCookieDomain","*.ory.sh"]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//sqa-web.ory.sh/";_paq.push(["setTrackerUrl",e+"np.php"]),_paq.push(["setSiteId","2"]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.src=e+"js/np.js",t.parentNode.insertBefore(p,t)}()</script>
<link rel="search" type="application/opensearchdescription+xml" title="Ory Kratos" href="/kratos/docs/opensearch.xml"><title data-react-helmet="true">Docker Images | Ory Kratos</title><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//kratos/docs/concepts/docker"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v0.6"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v0.6"><meta data-react-helmet="true" property="og:title" content="Docker Images | Ory Kratos"><meta data-react-helmet="true" name="description" content="Supported tags and respective Dockerfile links"><meta data-react-helmet="true" property="og:description" content="Supported tags and respective Dockerfile links"><link data-react-helmet="true" rel="shortcut icon" href="/kratos/docs/img/favico.png"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//kratos/docs/concepts/docker"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//kratos/docs/concepts/docker" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//kratos/docs/concepts/docker" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/kratos/docs/assets/css/styles.d2c68386.css">
<link rel="preload" href="/kratos/docs/assets/js/styles.6a51c5d5.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/runtime~main.24d71ae5.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/main.9e51062d.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/2.6e5ecd5e.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/3.d017d23c.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/b8d7c5e6.53a01579.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/485.6de6eee3.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/e6259ec7.c07fb1fb.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/17896441.d4b583b0.js" as="script">
<link rel="preload" href="/kratos/docs/assets/js/b7c43d25.e8446ac0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/kratos/docs/img/logo-kratos.svg" alt="Ory Kratos" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kratos/docs/img/logo-kratos.svg" alt="Ory Kratos" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://www.ory.sh/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ory/kratos/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discussions</a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Slack</a><a href="https://github.com/ory/kratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/kratos/docs/">v0.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kratos/docs/next/concepts/docker">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kratos/docs/concepts/docker">v0.6</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.5/">v0.5</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.4/">v0.4</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.3/">v0.3</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.2/">v0.2</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.1/">v0.1</a></li><li><a class="dropdown__link" href="/kratos/docs/versions">All versions</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/kratos/docs/img/logo-kratos.svg" alt="Ory Kratos" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kratos/docs/img/logo-kratos.svg" alt="Ory Kratos" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://www.ory.sh/" target="_blank" rel="noopener noreferrer" class="menu__link">Home</a></li><li class="menu__list-item"><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/ory/kratos/discussions" target="_blank" rel="noopener noreferrer" class="menu__link">Discussions</a></li><li class="menu__list-item"><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="menu__link">Slack</a></li><li class="menu__list-item"><a href="https://github.com/ory/kratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/next/concepts/docker">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/kratos/docs/concepts/docker">v0.6</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.5/">v0.5</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.4/">v0.4</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.3/">v0.3</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.2/">v0.2</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.1/">v0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: v0.6</span></div><header><h1 class="docTitle_3a4h">Docker Images</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="supported-tags-and-respective-dockerfile-links"></a>Supported tags and respective <code>Dockerfile</code> links<a class="hash-link" href="#supported-tags-and-respective-dockerfile-links" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/ory/kratos/blob/v0.4.3-alpha.1/.docker/Dockerfile" target="_blank" rel="noopener noreferrer"><code>latest</code>, <code>v0.4.3-alpha.1</code>, <code>v0.4.3</code>, <code>v0.4</code>, <code>v0</code></a></li><li><a href="https://github.com/ory/kratos/blob/v0.4.3-alpha.1/.docker/Dockerfile-sqlite" target="_blank" rel="noopener noreferrer"><code>latest-sqlite</code>, <code>v0.4.3-alpha.1-sqlite</code>, <code>v0.4.3-sqlite</code>, <code>v0.4-sqlite</code>, <code>v0-sqlite</code></a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="image-variants"></a>Image Variants<a class="hash-link" href="#image-variants" title="Direct link to heading">#</a></h2><p>The <code>Kratos</code> Docker images come in two different flavors, one with and one
without SQLite support. All Docker images with the postfix
<code>kratos:&lt;version&gt;-sqlite</code> in the tag are compiled with embed SQLite support and
uses libmusl. All Docker images (<code>kratos:&lt;version&gt;</code>) without the postfix
<code>-sqlite</code> are compiled without SQLite support and therefore also don&#x27;t include
libmusl.</p><p>If you don&#x27;t make use of the embedded SQLite support we recommend to use the
Docker images without SQLite support as they are smaller in size, include fewer
libraries and therefore have a smaller attack surface.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-to-use-these-images"></a>How to use these images<a class="hash-link" href="#how-to-use-these-images" title="Direct link to heading">#</a></h2><p>In order to make the provided Docker images as useful as possible they can be
configured through a set of supported Environment variables. In addition the
default configuration directory can be bound to a directory of choice to make it
simple to pass in your own configuration files.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="environment-variables"></a>Environment Variables<a class="hash-link" href="#environment-variables" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="dsn"></a><code>DSN</code><a class="hash-link" href="#dsn" title="Direct link to heading">#</a></h4><p>This environment variable allows you to specify the database source name. As the
<code>DSN</code> normally consists of the url to the database system and the credentials to
access the database it is recommended to specify the <code>DSN</code> using a Environment
variable.</p><p><strong>Example:</strong></p><p><code>docker run -e DSN=&quot;memory&quot; oryd/kratos:latest</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="secrets_default"></a><code>SECRETS_DEFAULT</code><a class="hash-link" href="#secrets_default" title="Direct link to heading">#</a></h4><p>This environment variable allows you to specify the secret used to sign and
verify signatures and encrypt things:</p><p><strong>Example:</strong></p><p><code>docker run -e SECRETS_DEFAULT=&quot;CHANGE-ME&quot; oryd/kratos:v0.4.3-alpha.1</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="volumes"></a>Volumes<a class="hash-link" href="#volumes" title="Direct link to heading">#</a></h3><p>If the file <code>$HOME/.kratos.yaml</code> exists, it will be used as the configuration
file. The provided Kratos Docker images currently do not include a default
configuration file, but make it easy to pass in your own configuration file(s)
by either binding a local directory or by creating your own custom Docker Image
and adding the configuration file(s) to the custom image.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="binding-host-directory"></a>Binding host directory<a class="hash-link" href="#binding-host-directory" title="Direct link to heading">#</a></h4><p><strong>Example:</strong> In this example we start the standard Docker container with SQLite
support and use the quickstart email-password example configuration files by
bind mounting the local directory. This example assumes that you checked out the
Kratos Git repo and execute the Docker command in the Kratos Git repo directory:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">docker run -it -e DSN=&quot;memory&quot; \</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">       --mount type=bind,source=&quot;$(pwd)&quot;/contrib/quickstart/kratos/email-password,target=/home/ory \</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">       oryd/kratos:latest-sqlite</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In general we only recommend this approach for local development.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="creating-custom-docker-image"></a>Creating custom Docker image<a class="hash-link" href="#creating-custom-docker-image" title="Direct link to heading">#</a></h4><p>You can create your own, custom Kratos Docker images which embeds your
configuration files by simply using the official Kratos Docker images as the
Base Image and just adding your configuration file(s) as shown in the example
below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dockerfile"><div tabindex="0" class="prism-code language-dockerfile codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">FROM oryd/kratos:latest</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">COPY contrib/quickstart/kratos/email-password/kratos.yml /home/ory</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h3><p>Below you find different examples how to use the official Kratos Docker images.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ory/kratos/edit/master/docs/versioned_docs/version-v0.6/concepts/docker.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-04-29T09:59:58.000Z" class="lastUpdatedDate_1WI_">4/29/2021</time> by <strong>aeneasr</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#supported-tags-and-respective-dockerfile-links" class="table-of-contents__link">Supported tags and respective <code>Dockerfile</code> links</a></li><li><a href="#image-variants" class="table-of-contents__link">Image Variants</a></li><li><a href="#how-to-use-these-images" class="table-of-contents__link">How to use these images</a><ul><li><a href="#environment-variables" class="table-of-contents__link">Environment Variables</a></li><li><a href="#volumes" class="table-of-contents__link">Volumes</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 ORY GmbH</div></div></div></footer></div>
<script src="/kratos/docs/assets/js/styles.6a51c5d5.js"></script>
<script src="/kratos/docs/assets/js/runtime~main.24d71ae5.js"></script>
<script src="/kratos/docs/assets/js/main.9e51062d.js"></script>
<script src="/kratos/docs/assets/js/2.6e5ecd5e.js"></script>
<script src="/kratos/docs/assets/js/3.d017d23c.js"></script>
<script src="/kratos/docs/assets/js/b8d7c5e6.53a01579.js"></script>
<script src="/kratos/docs/assets/js/485.6de6eee3.js"></script>
<script src="/kratos/docs/assets/js/e6259ec7.c07fb1fb.js"></script>
<script src="/kratos/docs/assets/js/17896441.d4b583b0.js"></script>
<script src="/kratos/docs/assets/js/b7c43d25.e8446ac0.js"></script>
<noscript><p><img src="//sqa-web.ory.sh/np.php?idsite=2&amp;rec=1" style="border:0;" alt=""></p></noscript></body>
</html>