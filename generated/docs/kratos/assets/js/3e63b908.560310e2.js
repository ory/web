(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{179:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return s})),t.d(r,"metadata",(function(){return i})),t.d(r,"toc",(function(){return c})),t.d(r,"default",(function(){return u}));var n=t(3),o=t(8),a=(t(0),t(550)),s={id:"performance-out-of-memory-password-hashing-argon2",title:"Performance Problems and Out Of Memory Panics Caused by Password Hashing"},i={unversionedId:"debug/performance-out-of-memory-password-hashing-argon2",id:"debug/performance-out-of-memory-password-hashing-argon2",isDocsHomePage:!1,title:"Performance Problems and Out Of Memory Panics Caused by Password Hashing",description:"This page only applies to you if you use Argon2 instead of BCrypt hashing",source:"@site/docs/debug/performance-out-of-memory-password-hashing-argon2.md",sourceDirName:"debug",slug:"/debug/performance-out-of-memory-password-hashing-argon2",permalink:"/kratos/docs/next/debug/performance-out-of-memory-password-hashing-argon2",editUrl:"https://github.com/ory/kratos/edit/master/docs/docs/debug/performance-out-of-memory-password-hashing-argon2.md",version:"current",lastUpdatedBy:"aeneasr",lastUpdatedAt:1619624197,formattedLastUpdatedAt:"4/28/2021",frontMatter:{id:"performance-out-of-memory-password-hashing-argon2",title:"Performance Problems and Out Of Memory Panics Caused by Password Hashing"},sidebar:"docs",previous:{title:"Common Cookie and CSRF Pitfalls",permalink:"/kratos/docs/next/debug/csrf"},next:{title:"SDKs",permalink:"/kratos/docs/next/sdk"}},c=[{value:"Common Errors",id:"common-errors",children:[]}],m={toc:c};function u(e){var r=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},m,t,{components:r,mdxType:"MDXLayout"}),Object(a.b)("div",{className:"admonition admonition-info alert alert--info"},Object(a.b)("div",{parentName:"div",className:"admonition-heading"},Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",{parentName:"h5",className:"admonition-icon"},Object(a.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(a.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(a.b)("div",{parentName:"div",className:"admonition-content"},Object(a.b)("p",{parentName:"div"},"This page only applies to you if you use Argon2 instead of BCrypt hashing"))),Object(a.b)("p",null,"To securely check if passwords match, Ory Kratos stores the Argon2 hash of every\npassword. This algorithm has to be tuned to match the desired security level as\nwell as responsiveness. Because it is not easy to determine the exact values\nwithout trying them out, Ory Kratos comes with a\n",Object(a.b)("a",{parentName:"p",href:"/kratos/docs/next/cli/kratos-hashers-argon2-calibrate"},"CLI")," that automatically calibrates\nthe values, following best practices. You can read more about these best\npractices in our\n",Object(a.b)("a",{parentName:"p",href:"https://www.ory.sh/choose-recommended-argon2-parameters-password-hashing/"},"blog post"),"."),Object(a.b)("h2",{id:"common-errors"},"Common Errors"),Object(a.b)("p",null,"There are some errors that indicate your Argon2 parameters need adjustment:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Very slow login and registration requests, might cause network timeouts;"),Object(a.b)("li",{parentName:"ol"},"Ory Kratos fails with ",Object(a.b)("inlineCode",{parentName:"li"},"fatal error: runtime: out of memory"),";"),Object(a.b)("li",{parentName:"ol"},"The host environment (e.g. Minikube, Docker, Kubernetes...) crashes or\nbecomes unresponsive;")),Object(a.b)("p",null,"In any of these cases, try reducing the resources used by Argon2 or increasing\nthe resources available to Kratos. Use the\n",Object(a.b)("a",{parentName:"p",href:"/kratos/docs/next/cli/kratos-hashers-argon2-calibrate"},"Argon2 calibrate CLI")," to detect the\nbest practice values for your server. Note that the calibration has to be done\nunder the exact same conditions that the server runs at."))}u.isMDXComponent=!0},550:function(e,r,t){"use strict";t.d(r,"a",(function(){return p})),t.d(r,"b",(function(){return b}));var n=t(0),o=t.n(n);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var m=o.a.createContext({}),u=function(e){var r=o.a.useContext(m),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},p=function(e){var r=u(e.components);return o.a.createElement(m.Provider,{value:r},e.children)},l={inlineCode:"code",wrapper:function(e){var r=e.children;return o.a.createElement(o.a.Fragment,{},r)}},d=o.a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),p=u(t),d=n,b=p["".concat(s,".").concat(d)]||p[d]||l[d]||a;return t?o.a.createElement(b,i(i({ref:r},m),{},{components:t})):o.a.createElement(b,i({ref:r},m))}));function b(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,s=new Array(a);s[0]=d;var i={};for(var c in r)hasOwnProperty.call(r,c)&&(i[c]=r[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var m=2;m<a;m++)s[m]=t[m];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);