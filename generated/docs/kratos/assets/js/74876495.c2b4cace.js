(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{1135:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-login-62bb1fd8642674c32a4ed197b0397641.png"},1136:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-login-ntrace-528cfa7d906b7a218e442a85909fed33.png"},1137:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-registration-8d3897c8516f99648767a8e230fd9ed8.png"},1138:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-registration-ntrace-7628b52a112090f4e5dc461123f88adf.png"},1139:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-registration-pwpolicy-61e8c6492d55b6fdde7e0fa71c56c13d.png"},1140:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-dashboard-17e618c35cf2d5bee1cb27532ef61cb2.png"},1141:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/mailslurper-quickstart-956e96c6f57f93dc59fb6288fab220b9.png"},1142:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/secureapp-verified-dashboard-84c4a536838adbcc6aad295a1865dc18.png"},1143:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/quickstart-recover-i-1c1311d3f7a2ba75e6abf5548de57aa6.png"},1144:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/quickstart-recover-ii-3a213f3ca6d4963a6c472af37c801a0d.png"},1145:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/quickstart-recover-iii-531b1e0013432c60ff3546a10c4a9402.png"},1146:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/quickstart-recover-iv-900b407f650b56e181ea57ddbceb821b.png"},278:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return d}));var a=n(3),r=n(8),o=(n(0),n(549)),i=n(550),s=n(564),c={id:"quickstart",title:"Quickstart"},l={unversionedId:"quickstart",id:"quickstart",isDocsHomePage:!1,title:"Quickstart",description:"Ory Kratos has several moving parts and getting everything right from the",source:"@site/docs/quickstart.mdx",sourceDirName:".",slug:"/quickstart",permalink:"/kratos/docs/next/quickstart",editUrl:"https://github.com/ory/kratos/edit/master/docs/docs/quickstart.mdx",version:"current",lastUpdatedBy:"aeneasr",lastUpdatedAt:1619690398,formattedLastUpdatedAt:"4/29/2021",frontMatter:{id:"quickstart",title:"Quickstart"},sidebar:"docs",previous:{title:"Introduction",permalink:"/kratos/docs/next/"},next:{title:"Installation",permalink:"/kratos/docs/next/install"}},u=[{value:"Use Case: Application Login and Registration",id:"use-case-application-login-and-registration",children:[]},{value:"Setup",id:"setup",children:[{value:"Clone Ory Kratos and Run it in Docker",id:"clone-ory-kratos-and-run-it-in-docker",children:[]},{value:"Network Architecture",id:"network-architecture",children:[]}]},{value:"Perform Registration, Login, and Logout",id:"perform-registration-login-and-logout",children:[{value:"Understanding How Login and Registration Works",id:"understanding-how-login-and-registration-works",children:[]},{value:"Email Verification",id:"email-verification",children:[]},{value:"Account Recovery",id:"account-recovery",children:[]}]},{value:"Cleaning Up Docker",id:"cleaning-up-docker",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],p={toc:u};function d(e){var t=e.components,c=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,c,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Ory Kratos has several moving parts and getting everything right from the\nbeginning can be challenging. This getting started guide will help you install\nOry Kratos and some additional dependencies so that you can see how it works."),Object(o.b)("p",null,"Please be aware that this guide is not a replacement for studying the docs. You\nmust understand core concepts and APIs to use Ory Kratos productively. This is\nmerely a guide to get you set up with some examples."),Object(o.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/JhlIZ3aChXc",frameborder:"0",allowfullscreen:!0}),Object(o.b)("h2",{id:"use-case-application-login-and-registration"},"Use Case: Application Login and Registration"),Object(o.b)("p",null,"This section gives you some context on what we want to achieve and what tools we\nneed for that. You will also learn about the network set up we picked for this\nguide."),Object(o.b)("p",null,"This quickstart guide operates on the assumption that we are writing a NodeJS\napp called ",Object(o.b)("strong",{parentName:"p"},"SecureApp"),". This app is using nothing fancy - some ExpressJS and a\nbit of HTML Templating using Handlebars. We do want to use TypeScript, but only\nbecause it's more readable - not because we're doing anything out of the\nordinary!"),Object(o.b)("p",null,"You could pick any technology here, of course. This works with Swift, ReactJS,\nor Angular (client side) as well as with PHP, Ruby, Python, Java (server side) -\nyou name it! We picked NodeJS + TypeScript because we believe it is the easiest\nto understand, and because JavaScript and NodeJS are universally understood and\neasy to install."),Object(o.b)("p",null,"We know that SecureApp will need to have some type of dashboard and that it\nneeds users. Therefore, we need:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Login"),Object(o.b)("li",{parentName:"ul"},"Logout"),Object(o.b)("li",{parentName:"ul"},"Registration"),Object(o.b)("li",{parentName:"ul"},'Profile management ("update first name", "update avatar", etc.)'),Object(o.b)("li",{parentName:"ul"},'Credentials Management ("add a new recovery email", "change password", etc.)'),Object(o.b)("li",{parentName:"ul"},'Account Recovery ("password reset")'),Object(o.b)("li",{parentName:"ul"},"Email Verification"),Object(o.b)("li",{parentName:"ul"},"Two Factor Authentication"),Object(o.b)("li",{parentName:"ul"},'"Sign in with Google" and "Sign in with GitHub"')),Object(o.b)("p",null,"and of course:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A dashboard that shows\n",Object(o.b)("inlineCode",{parentName:"li"},"Hello {{ traits.name.first }} {{ traits.name.last }}}!")," which is only visible\nwhen the user is signed in.")),Object(o.b)("h2",{id:"setup"},"Setup"),Object(o.b)("p",null,'As you might already know, Ory Kratos is API-only; it does not have a UI or HTML\ntemplating engine. We will implement all the user-facing UIs like "dashboard",\n"login", and "registration" in our NodeJS SecureApp!'),Object(o.b)("p",null,"To ensure that no one can access the dashboard without prior authentication\n(login), we can use a small piece of code (here ExpressJS) to do that:"),Object(o.b)(s.a,{lang:"js",link:"https://github.com/ory/kratos-selfservice-ui-node/blob/master/src/middleware/simple.ts",src:"https://raw.githubusercontent.com/ory/kratos-selfservice-ui-node/master/src/middleware/simple.ts",mdxType:"CodeFromRemote"}),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Ory Kratos is not just an API: it uses cookies, HTTP redirects, anti-CSRF tokens\nand more so you don't have to."))),Object(o.b)("p",null,"The SecureApp and Ory Kratos need to share cookies in order for anti-CSRF tokens\nand login sessions to work. Because the quickstart runs on different ports on\n",Object(o.b)("inlineCode",{parentName:"p"},"127.0.0.1")," there is nothing we need to do to get this all working. In\nenvironments where you have multiple sub-domains or reverse proxies, the set up\nwill be a bit more sophisticated. You can find more information about the\ndifferent set up possibilities in the\n",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/guides/multi-domain-cookies"},"Getting Cookies to Work on Multi-Domains Guide"),"."),Object(o.b)("p",null,"Ory Kratos does not ship with an administrative user interface. You must\nimplement that yourself or choose the Ory Cloud offering (to be announced). In\nthis quickstart we will use Ory Kratos' CLI to interact with Ory Kratos' APIs."),Object(o.b)("p",null,"The quickstart also comes with ",Object(o.b)("a",{parentName:"p",href:"https://mailslurper.com"},"MailSlurper"),", a mock\nSMTP server the demo uses to show how email verification works."),Object(o.b)("h3",{id:"clone-ory-kratos-and-run-it-in-docker"},"Clone Ory Kratos and Run it in Docker"),Object(o.b)("p",null,"To get this example working, you will need Git,\n",Object(o.b)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"Docker"),", and\n",Object(o.b)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"Docker Compose")," installed on your\nsystem. No other dependencies are required. Before you start, make sure that\nDocker has enough disk space."),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"This tutorial uses Docker-Compose volumes which have reported to run out of disk\nspace. Check the remaining disk space using ",Object(o.b)("inlineCode",{parentName:"p"},"docker system df"),". If the volumes\nare above the 85% threshold,\n",Object(o.b)("a",{parentName:"p",href:"https://docs.docker.com/config/pruning/"},"prune old Docker objects")," before you\nstart!"))),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"If you encounter build errors (e.g. network timeout), make sure that the network\nis running correctly and run ",Object(o.b)("inlineCode",{parentName:"p"},"make docker")," again. If the problem persists, feel\nfree to ",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/issues/new/choose"},"open an issue"),"."))),Object(o.b)("p",null,"Let's clone Ory Kratos and run ",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose"),":"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"git clone https://github.com/ory/kratos.git\ncd kratos\ngit checkout v0.6.0-alpha.1.pre.1\n\ndocker-compose -f quickstart.yml -f quickstart-standalone.yml up --build --force-recreate\n# If you have SELinux, run:\ndocker-compose -f quickstart.yml -f quickstart-selinux.yml -f quickstart-standalone.yml up --build --force-recreate\n")),Object(o.b)("p",null,"This might take a minute or two. Once the output slows down and logs indicate a\nhealthy system you're ready to roll! A healthy system will show something along\nthe lines of (the order of messages might be reversed):"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'kratos_1 | time="2020-01-20T14:52:13Z" level=info msg="Starting the admin httpd on: 0.0.0.0:4434"\nkratos_1 | time="2020-01-20T14:52:13Z" level=info msg="Starting the public httpd on: 0.0.0.0:4433"\n')),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"There are two important factors to get a fully functional system:"),Object(o.b)("ul",{parentName:"div"},Object(o.b)("li",{parentName:"ul"},"You need to make sure that ports ",Object(o.b)("inlineCode",{parentName:"li"},"4455"),", ",Object(o.b)("inlineCode",{parentName:"li"},"4433"),", ",Object(o.b)("inlineCode",{parentName:"li"},"4434"),", and ",Object(o.b)("inlineCode",{parentName:"li"},"4436"),"\xa0",Object(o.b)("a",{parentName:"li",href:"https://serverfault.com/questions/309052/check-if-port-is-open-or-closed-on-a-linux-server"},"are free"),"."),Object(o.b)("li",{parentName:"ul"},"Make sure to always use ",Object(o.b)("inlineCode",{parentName:"li"},"127.0.0.1")," as the hostname; never use ",Object(o.b)("inlineCode",{parentName:"li"},"localhost"),"!\nThis is important because browsers treat these two as separate domains and\nwill therefore have issues with setting and using cookies correctly.")))),Object(o.b)("p",null,"You might notice that no database is being used in this example. Ory Kratos\nsupports SQLite, PostgreSQL, MySQL, and CockroachDB as database backends. For\nthe quickstart, we're mounting a persistent volume to store the SQLite database\nin."),Object(o.b)("p",null,"Future guides will explain how to set up a production system."),Object(o.b)("h3",{id:"network-architecture"},"Network Architecture"),Object(o.b)("p",null,"This demo makes use of several services:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",{parentName:"li",href:"https://github.com/ory/kratos"},"Ory Kratos"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},'Public ("Browser") API (port 4433)'),Object(o.b)("li",{parentName:"ul"},"Admin API (port 4434) - This is only made public so we can test via the\nCLI."))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",{parentName:"li",href:"http://github.com/ory/kratos-selfservice-ui-node"},"SecureApp"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Public (port 4455) - an example application written in NodeJS that\nimplements the login, registration, logout, dashboard, and other UIs."))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",{parentName:"li",href:"https://github.com/mailslurper"},"MailSlurper"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Public (port 4436) - a development SMTP server which Ory Kratos will use to\nsend emails.")))),Object(o.b)("p",null,"To better understand the application architecture, let's take a look at the\nnetwork configuration. This assumes that you have at least some understanding of\nhow Docker networks work:"),Object(o.b)(i.a,{chart:'\ngraph TD\nsubgraph hn[Host Network]\n    B[Browser]\n    B--\x3e|Can access URLs via 127.0.0.1:4455|OKPHN\n    B--\x3e|Can access URLs via 127.0.0.1:4433|PAPI\n    B--\x3e|Can access UI via 127.0.0.1:4436|SMTPUI\n    OKPHN([SecureApp exposed at :4455])\n    SMTPUI([MailSlurper UI exposed at :4436])\n    PAPI([Ory Kratos Public API exposed at :4433])\nend\nsubgraph dn["Internal Docker Network (intranet)"]\n    OKPHN-.->SA\n    SMTPUI-.->SMTP\n    PAPI-.->OK\n    SA--\x3e|Talks to and validates login sessions using|OK\n    OK--\x3e|Sends mail via|SMTP\n    OK[Ory Kratos]\n    SA["SecureApp (Ory Kratos SelfService UI Node Example)"]\n    SMTP["SMTP Server (MailSlurper)"]\nend\n',mdxType:"Mermaid"}),Object(o.b)("h2",{id:"perform-registration-login-and-logout"},"Perform Registration, Login, and Logout"),Object(o.b)("p",null,"Enough theory, it's time to get this thing going! Let's start by trying to open\nthe dashboard - ",Object(o.b)("strong",{parentName:"p"},"go to\n",Object(o.b)("a",{parentName:"strong",href:"http://127.0.0.1:4455/dashboard"},"127.0.0.1:4455/dashboard")),"."),Object(o.b)("p",null,"You should notice that you're ending up at the login endpoint instead of the\ndashboard:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Login screen of your secured app",src:n(1135).default})),Object(o.b)("p",null,"Looking at the network stack, you can see two redirects happening:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Network trace of your secured app",src:n(1136).default})),Object(o.b)("p",null,"Here's a play-by-play of what happened:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"SecureApp used the Ory Kratos JavaScript language client to guard the\n",Object(o.b)("inlineCode",{parentName:"li"},"/dashboard")," route. The Ory Kratos client checked the cookies from the\nrequest and saw you were not logged in."),Object(o.b)("li",{parentName:"ol"},"The route guard redirected you from ",Object(o.b)("inlineCode",{parentName:"li"},"/dashboard")," to ",Object(o.b)("inlineCode",{parentName:"li"},"/auth/login"),". Ory\nKratos' browser API requires a ",Object(o.b)("inlineCode",{parentName:"li"},"<flow_id>")," in order to log you in. It looked\nfor this ID in the URL as a query parameter but couldn't find it."),Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"/auth/login")," redirected you to\n",Object(o.b)("inlineCode",{parentName:"li"},"http://127.0.0.1:4433/self-service/login/browser"),", which is one of Ory\nKratos' APIs used for logging in browser-based applications."),Object(o.b)("li",{parentName:"ol"},"Kratos handled ",Object(o.b)("inlineCode",{parentName:"li"},"/self-service/login/browser")," which created and persisted a\nnew flow with ",Object(o.b)("inlineCode",{parentName:"li"},"csrf_token"),". Kratos would check no session exists, redirected\nthe browser to ",Object(o.b)("inlineCode",{parentName:"li"},"/auth/login?flow=<flow_id>"),". If session exists already, the\nbrowser will be redirected to ",Object(o.b)("inlineCode",{parentName:"li"},"urls.default_redirect_url")," unless the query\nparameter ",Object(o.b)("inlineCode",{parentName:"li"},"?refresh=true")," was set."),Object(o.b)("li",{parentName:"ol"},"SecureApp handled the ",Object(o.b)("inlineCode",{parentName:"li"},"/auth/login")," route, found the ",Object(o.b)("inlineCode",{parentName:"li"},"<flow_id>")," in the URL\nquery parameter, and used it to make an HTTP request to\n",Object(o.b)("inlineCode",{parentName:"li"},"http://kratos:4434/self-service/login/flows?id=<flow_id>"),". Notice the URI is\n",Object(o.b)("inlineCode",{parentName:"li"},"kratos:4434")," because SecureApp is making a server-side HTTP request via\nDocker's private network to Ory Kratos' Admin API."),Object(o.b)("li",{parentName:"ol"},"Ory Kratos responded with data which SecureApp used to render the HTML login\nform.")),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Your rendered login form should be a standard HTML ",Object(o.b)("inlineCode",{parentName:"p"},"<form>"),". AJAX requests will\nnot work!"))),Object(o.b)("p",null,"We can use ",Object(o.b)("inlineCode",{parentName:"p"},"curl")," to see what Ory Kratos responds with. Try visiting\n",Object(o.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:4455/auth/login"),", copying the generated ",Object(o.b)("inlineCode",{parentName:"p"},"<flow_id>"),", and\nmaking the request yourself:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell-session"},'$ # curl -s "http://127.0.0.1:4434/self-service/login/flows?id=07016811-917d-4788-bb9c-fc297897af6c" \\\n$ curl -s "http://127.0.0.1:4434/self-service/login/flows?id=<flow_id>" \\\n  | jq\n\n{\n  "id": "07016811-917d-4788-bb9c-fc297897af6c",\n  "type": "browser",\n  "expires_at": "2021-04-28T08:37:53.924337873Z",\n  "issued_at": "2021-04-28T08:27:53.924337873Z",\n  "request_url": "http://127.0.0.1:4433/self-service/login/browser",\n  "ui": {\n    "action": "http://127.0.0.1:4433/self-service/login?flow=07016811-917d-4788-bb9c-fc297897af6c",\n    "method": "POST",\n    "nodes": [\n      {\n        "type": "input",\n        "group": "default",\n        "attributes": {\n          "name": "csrf_token",\n          "type": "hidden",\n          "value": "IuiHo8fajl6Nwi2CfR33bmC7ZI+geYY44oinK/npkS9gaeV6DlkzS0voYZuyGawsCruvlawFl/pY6/Ph6d9JVg==",\n          "required": true,\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {}\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "password_identifier",\n          "type": "text",\n          "value": "",\n          "required": true,\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070004,\n            "text": "ID",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "password",\n          "type": "password",\n          "required": true,\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070001,\n            "text": "Password",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "method",\n          "type": "submit",\n          "value": "password",\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1010001,\n            "text": "Sign in",\n            "type": "info",\n            "context": {}\n          }\n        }\n      }\n    ]\n  },\n  "forced": false\n}\n')),Object(o.b)("p",null,"This flow also works with Single Page Apps (SPA) and frameworks like Angular or\nReactJS. For more details about the specific flows (login, registration, logout,\netc.), head over to the ",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/concepts/index"},"concept")," chapter."),Object(o.b)("p",null,'Let\'s move on to the next flow - registration! Click on "Register new account",\nwhich initiates a flow similar to the one we just used:'),Object(o.b)("p",null,Object(o.b)("img",{alt:"Registration screen of your secured app",src:n(1137).default})),Object(o.b)("p",null,"The network trace should look familiar by now:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Registration with network trace screen of your secured app",src:n(1138).default})),Object(o.b)("p",null,"If we try to sign up using a password like ",Object(o.b)("inlineCode",{parentName:"p"},"123456"),", Krato's password policy\nwill complain:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Registration with network trace screen of your secured app",src:n(1139).default})),Object(o.b)("p",null,"The error message is coming directly from Ory Kratos' Admin API:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'# curl -s "http://127.0.0.1:4433/self-service/registration/flows?id=f0c0830a-f5b2-4c2d-a37f-2e70152a4f7c" \\\n$ curl -s "http://127.0.0.1:4433/self-service/registration/flows?id=<flow_id>" \\\n  | jq\n\n{\n  "id": "f0c0830a-f5b2-4c2d-a37f-2e70152a4f7c",\n  "type": "browser",\n  "expires_at": "2021-04-28T08:54:12.951178972Z",\n  "issued_at": "2021-04-28T08:44:12.951178972Z",\n  "request_url": "http://127.0.0.1:4433/self-service/registration/browser",\n  "ui": {\n    "action": "http://127.0.0.1:4433/self-service/registration?flow=f0c0830a-f5b2-4c2d-a37f-2e70152a4f7c",\n    "method": "POST",\n    "nodes": [\n      {\n        "type": "input",\n        "group": "default",\n        "attributes": {\n          "name": "csrf_token",\n          "type": "hidden",\n          "value": "408SIAOvpKxW/WbcYfKue26MlLTMbON7T7JT1yhiSemhznD5yiwZuZDXKsWu9vU5BIxfrsAQ8rn10QcdOFSRkA==",\n          "required": true,\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {}\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "traits.email",\n          "type": "email",\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070002,\n            "text": "E-Mail",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "password",\n          "type": "password",\n          "required": true,\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070001,\n            "text": "Password",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "traits.name.first",\n          "type": "text",\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070002,\n            "text": "First Name",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "traits.name.last",\n          "type": "text",\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1070002,\n            "text": "Last Name",\n            "type": "info"\n          }\n        }\n      },\n      {\n        "type": "input",\n        "group": "password",\n        "attributes": {\n          "name": "method",\n          "type": "submit",\n          "value": "password",\n          "disabled": false\n        },\n        "messages": null,\n        "meta": {\n          "label": {\n            "id": 1040001,\n            "text": "Sign up",\n            "type": "info",\n            "context": {}\n          }\n        }\n      }\n    ]\n  }\n}\n')),Object(o.b)("p",null,"Setting a password that doesn't violate these policies, we will be immediately\nredirected to the dashboard:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"SecureApp Dashboard",src:n(1140).default})),Object(o.b)("p",null,'By clicking the "logout" icon in the top right, you will be redirected to the\nlogin screen again where you will be able to use your credentials to log back in\nagain. Exciting!'),Object(o.b)("h3",{id:"understanding-how-login-and-registration-works"},"Understanding How Login and Registration Works"),Object(o.b)("p",null,"Head over to the ",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/self-service"},"Self-Service Flows Chapter")," for an in-depth\nexplanation of how each individual flow works."),Object(o.b)("h3",{id:"email-verification"},"Email Verification"),Object(o.b)("p",null,"As you've signed up, an email was sent to the email address you used. Because\nthe quickstart uses a fake SMTP server, the email did not arrive in your inbox.\nYou can retrieve the email however by opening the MailSlurper UI at\n",Object(o.b)("a",{parentName:"p",href:"http://127.0.0.1:4436"},"127.0.0.1:4436"),"."),Object(o.b)("p",null,"You should see something like this:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"User Email Verification",src:n(1141).default})),Object(o.b)("p",null,"If not, hard refresh the tab or click on the home icon in the menu bar."),Object(o.b)("p",null,"Next, click the verification link. You will end up at the dashboard, with a\nverified email address (check the ",Object(o.b)("inlineCode",{parentName:"p"},"verified")," and ",Object(o.b)("inlineCode",{parentName:"p"},"verified_at")," field in the JSON\nresponse):"),Object(o.b)("p",null,Object(o.b)("img",{alt:"SecureApp Dashboard",src:n(1142).default})),Object(o.b)("p",null,"To re-request the verification email, fill out the form at\n",Object(o.b)("a",{parentName:"p",href:"http://127.0.0.1:4455/verify"},"127.0.0.1:4455/verify"),"."),Object(o.b)("p",null,"To learn more about verification recovery, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/self-service/flows/verify-email-account-activation"},"Email and Phone Verification and Account Activation Documentation"),"."),Object(o.b)("h3",{id:"account-recovery"},"Account Recovery"),Object(o.b)("p",null,'The quickstart has account recovery enabled. To recover an account, log out and\nclick on "Reset password":'),Object(o.b)("p",null,Object(o.b)("img",{alt:"Click on recover account",src:n(1143).default})),Object(o.b)("p",null,"The next screen shows a HTML form where you enter your email address:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Enter your email address",src:n(1144).default})),Object(o.b)("p",null,'Hit "submit" and check the emails for the account recovery message:'),Object(o.b)("p",null,Object(o.b)("img",{alt:"Check your email for the password reset email",src:n(1145).default})),Object(o.b)("p",null,"Click the link, and change your password:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Change your password",src:n(1146).default})),Object(o.b)("p",null,"You are now able to sign in with the new password. To learn more about account\nrecovery, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/self-service/flows/account-recovery"},"Account Recovery Documentation"),"."),Object(o.b)("h4",{id:"configuration"},"Configuration"),Object(o.b)("p",null,"You can find all configuration files used for this quickstart guide in\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/tree/v0.6.0-alpha.1.pre.1/contrib/quickstart/kratos/email-password"},Object(o.b)("inlineCode",{parentName:"a"},"./contrib/quickstart/kratos")),"\n,\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/blob/v0.6.0-alpha.1.pre.1/quickstart.yml"},Object(o.b)("inlineCode",{parentName:"a"},"./quickstart.yml")),",\nand\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/blob/v0.6.0-alpha.1.pre.1/quickstart-standalone.yml"},Object(o.b)("inlineCode",{parentName:"a"},"./quickstart-standalone.yml")),".\nTo understand what each of those configuration files does, consult the other\nchapters of this documentation."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"To get a minimal version of Ory Kratos running, you need to set configuration\nvalues for\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/blob/v0.6.0-alpha.1.pre.1/contrib/quickstart/kratos/email-password/kratos.yml#L75"},Object(o.b)("inlineCode",{parentName:"a"},"identity.default_schema_url")),"\nand\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/blob/v0.6.0-alpha.1.pre.1/quickstart.yml#L42"},Object(o.b)("inlineCode",{parentName:"a"},"DSN")),".\nYou should also configure\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/kratos/blob/v0.6.0-alpha.1.pre.1/contrib/quickstart/kratos/email-password/kratos.yml#L24"},Object(o.b)("inlineCode",{parentName:"a"},"selfservice.flows.*.ui_url")),"\nor else Kratos will use fallback URLs."))),Object(o.b)("p",null,"In the future, this guide will support more use cases such as:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"GitHub to login and registration")),Object(o.b)("h2",{id:"cleaning-up-docker"},"Cleaning Up Docker"),Object(o.b)("p",null,"To clean everything up, you need to bring down the Docker Compose environment\nand remove all mounted volumes."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"docker-compose -f quickstart.yml down -v\ndocker-compose -f quickstart.yml rm -fsv\n")),Object(o.b)("h2",{id:"next-steps"},"Next Steps"),Object(o.b)("p",null,"Here is some information if you want to modify the quickstart to test Ory Kratos\nin with different settings."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Using different databases")),Object(o.b)("p",null,"If you want to run the quickstart with PostgreSQL, run the following\ndocker-compose:\n",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose -f quickstart.yml -f quickstart-standalone.yml -f quickstart-postgres.yml up --build --force-recreate")),Object(o.b)("p",null,"If you want to run the quickstart with CockroachDB, run the following\ndocker-compose:\n",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose -f quickstart.yml -f quickstart-standalone.yml -f quickstart-crdb.yml up --build --force-recreate")),Object(o.b)("p",null,"If you want to run the quickstart with MySQL, run the following docker-compose:\n",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose -f quickstart.yml -f quickstart-standalone.yml -f quickstart-mysql.yml up --build --force-recreate")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Changing ports")),Object(o.b)("p",null,"If you want to change ports for the SelfService-UI, you need to change them in\n",Object(o.b)("inlineCode",{parentName:"p"},"quickstart.yml")," as well as in the\n",Object(o.b)("inlineCode",{parentName:"p"},"contrib/quickstart/kratos/email-password/kratos.yml")," accordingly."),Object(o.b)("p",null,"Note that you also need to change the ports for flows (error, settings,\nrecovery, verification, logout, login, registration)."),Object(o.b)("p",null,"The same procedure applies if you want to change ports for the Public UI/Admin\nUI or the Mailslurper."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Hooks")),Object(o.b)("p",null,"If you want to change the redirects happening after registration,login or a\nsettings change, take a look at this document: ",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/self-service/hooks"},"Hooks"),"."),Object(o.b)("p",null,"If you delete the ",Object(o.b)("inlineCode",{parentName:"p"},"session")," hook from ",Object(o.b)("inlineCode",{parentName:"p"},"kratos.yml"),", the user will ",Object(o.b)("em",{parentName:"p"},"not")," be\nimmediately signed in after registration."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"OIDC")),Object(o.b)("p",null,"If you want to test Ory Kratos integration with different OIDC providers, you\nwill find more information in this document:\n",Object(o.b)("a",{parentName:"p",href:"/kratos/docs/next/guides/sign-in-with-github-google-facebook-linkedin"},"OIDC")))}d.isMDXComponent=!0},550:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(572),i=n.n(o),s=n(57),c=n.n(s),l=n(566),u=n.n(l);i.a.initialize({startOnLoad:!0,logLevel:"fatal",securityLevel:"strict",arrowMarkerAbsolute:!1,theme:"neutral",flowchart:{useMaxWidth:!0,htmlLabels:!0,rankSpacing:65,nodeSpacing:30,curve:"basis"},sequence:{useMaxWidth:!0},gantt:{useMaxWidth:!0}});t.a=function(e){var t,n=e.chart,o=Object(a.useState)(!1),s=o[0],l=o[1],p=Object(a.useState)(void 0),d=p[0],b=p[1],m=Object(a.useState)("mermaid-"+Math.random().toString(36).substr(2,-1))[0],h=function(){return l(!s)};return Object(a.useEffect)((function(){i.a.render(m,n,(function(e){b(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:h,className:u()(c.a.graph,c.a.pointer),dangerouslySetInnerHTML:{__html:d}}),r.a.createElement("div",{onClick:h,className:u()(c.a.overlay,c.a.pointer,c.a.graph,(t={},t[c.a.visible]=s,t))},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:u()(c.a.backdrop,c.a.graph),dangerouslySetInnerHTML:{__html:d}})))}},558:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(3),r=n(0),o=n.n(r),i=n(551),s={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},c={Prism:n(21).a,theme:s};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var p=/\r\n|\r|\n/,d=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},b=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},m=function(e,t){var n=e.plain,a=Object.create(null),r=e.styles.reduce((function(e,n){var a=n.languages,r=n.style;return a&&!a.includes(t)||n.types.forEach((function(t){var n=u({},e[t],r);e[t]=n})),e}),a);return r.root=n,r.plain=u({},n,{backgroundColor:null}),r};function h(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}var g=function(e){function t(){for(var t=this,n=[],a=arguments.length;a--;)n[a]=arguments[a];e.apply(this,n),l(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?m(e.theme,e.language):void 0;return t.themeDict=n})),l(this,"getLineProps",(function(e){var n=e.key,a=e.className,r=e.style,o=u({},h(e,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),i=t.getThemeDict(t.props);return void 0!==i&&(o.style=i.plain),void 0!==r&&(o.style=void 0!==o.style?u({},o.style,r):r),void 0!==n&&(o.key=n),a&&(o.className+=" "+a),o})),l(this,"getStyleForToken",(function(e){var n=e.types,a=e.empty,r=n.length,o=t.getThemeDict(t.props);if(void 0!==o){if(1===r&&"plain"===n[0])return a?{display:"inline-block"}:void 0;if(1===r&&!a)return o[n[0]];var i=a?{display:"inline-block"}:{},s=n.map((function(e){return o[e]}));return Object.assign.apply(Object,[i].concat(s))}})),l(this,"getTokenProps",(function(e){var n=e.key,a=e.className,r=e.style,o=e.token,i=u({},h(e,["key","className","style","token"]),{className:"token "+o.types.join(" "),children:o.content,style:t.getStyleForToken(o),key:void 0});return void 0!==r&&(i.style=void 0!==i.style?u({},i.style,r):r),void 0!==n&&(i.key=n),a&&(i.className+=" "+a),i})),l(this,"tokenize",(function(e,t,n,a){var r={code:t,grammar:n,language:a,tokens:[]};e.hooks.run("before-tokenize",r);var o=r.tokens=e.tokenize(r.code,r.grammar,r.language);return e.hooks.run("after-tokenize",r),o}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,a=e.code,r=e.children,o=this.getThemeDict(this.props),i=t.languages[n];return r({tokens:function(e){for(var t=[[]],n=[e],a=[0],r=[e.length],o=0,i=0,s=[],c=[s];i>-1;){for(;(o=a[i]++)<r[i];){var l=void 0,u=t[i],m=n[i][o];if("string"==typeof m?(u=i>0?u:["plain"],l=m):(u=b(u,m.type),m.alias&&(u=b(u,m.alias)),l=m.content),"string"==typeof l){var h=l.split(p),g=h.length;s.push({types:u,content:h[0]});for(var f=1;f<g;f++)d(s),c.push(s=[]),s.push({types:u,content:h[f]})}else i++,t.push(u),n.push(l),a.push(0),r.push(l.length)}i--,t.pop(),n.pop(),a.pop(),r.pop()}return d(s),c}(void 0!==i?this.tokenize(t,a,i,n):[a]),className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(r.Component);var f=n(563),y=n.n(f),v={plain:{color:"#bfc7d5",backgroundColor:"#292d3e"},styles:[{types:["comment"],style:{color:"rgb(105, 112, 152)",fontStyle:"italic"}},{types:["string","inserted"],style:{color:"rgb(195, 232, 141)"}},{types:["number"],style:{color:"rgb(247, 140, 108)"}},{types:["builtin","char","constant","function"],style:{color:"rgb(130, 170, 255)"}},{types:["punctuation","selector"],style:{color:"rgb(199, 146, 234)"}},{types:["variable"],style:{color:"rgb(191, 199, 213)"}},{types:["class-name","attr-name"],style:{color:"rgb(255, 203, 107)"}},{types:["tag","deleted"],style:{color:"rgb(255, 85, 114)"}},{types:["operator"],style:{color:"rgb(137, 221, 255)"}},{types:["boolean"],style:{color:"rgb(255, 88, 116)"}},{types:["keyword"],style:{fontStyle:"italic"}},{types:["doctype"],style:{color:"rgb(199, 146, 234)",fontStyle:"italic"}},{types:["namespace"],style:{color:"rgb(178, 204, 214)"}},{types:["url"],style:{color:"rgb(221, 221, 221)"}}]},O=n(561),j=n(553),k=function(){var e=Object(j.useThemeConfig)().prism,t=Object(O.a)().isDarkTheme,n=e.theme||v,a=e.darkTheme||n;return t?a:n},w=n(567),N=n(59),C=n.n(N),x=/{([\d,-]+)}/,S=function(e){void 0===e&&(e=["js","jsBlock","jsx","python","html"]);var t={js:{start:"\\/\\/",end:""},jsBlock:{start:"\\/\\*",end:"\\*\\/"},jsx:{start:"\\{\\s*\\/\\*",end:"\\*\\/\\s*\\}"},python:{start:"#",end:""},html:{start:"\x3c!--",end:"--\x3e"}},n=["highlight-next-line","highlight-start","highlight-end"].join("|"),a=e.map((function(e){return"(?:"+t[e].start+"\\s*("+n+")\\s*"+t[e].end+")"})).join("|");return new RegExp("^\\s*(?:"+a+")\\s*$")};function T(e){var t=e.children,n=e.className,s=e.metastring,l=e.title,u=Object(j.useThemeConfig)().prism,p=Object(r.useState)(!1),d=p[0],b=p[1],m=Object(r.useState)(!1),h=m[0],f=m[1];Object(r.useEffect)((function(){f(!0)}),[]);var v=Object(j.parseCodeBlockTitle)(s)||l,O=Object(r.useRef)(null),N=[],T=k(),q=Array.isArray(t)?t.join(""):t;if(s&&x.test(s)){var A=s.match(x)[1];N=y()(A).filter((function(e){return e>0}))}var I=n&&n.replace(/language-/,"");!I&&u.defaultLanguage&&(I=u.defaultLanguage);var P=q.replace(/\n$/,"");if(0===N.length&&void 0!==I){for(var L,M="",R=function(e){switch(e){case"js":case"javascript":case"ts":case"typescript":return S(["js","jsBlock"]);case"jsx":case"tsx":return S(["js","jsBlock","jsx"]);case"html":return S(["js","jsBlock","html"]);case"python":case"py":return S(["python"]);default:return S()}}(I),D=q.replace(/\n$/,"").split("\n"),K=0;K<D.length;){var E=K+1,H=D[K].match(R);if(null!==H){switch(H.slice(1).reduce((function(e,t){return e||t}),void 0)){case"highlight-next-line":M+=E+",";break;case"highlight-start":L=E;break;case"highlight-end":M+=L+"-"+(E-1)+","}D.splice(K,1)}else K+=1}N=y()(M),P=D.join("\n")}var B=function(){!function(e,{target:t=document.body}={}){const n=document.createElement("textarea"),a=document.activeElement;n.value=e,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const r=document.getSelection();let o=!1;r.rangeCount>0&&(o=r.getRangeAt(0)),t.append(n),n.select(),n.selectionStart=0,n.selectionEnd=e.length;let i=!1;try{i=document.execCommand("copy")}catch{}n.remove(),o&&(r.removeAllRanges(),r.addRange(o)),a&&a.focus()}(P),b(!0),setTimeout((function(){return b(!1)}),2e3)};return o.a.createElement(g,Object(a.a)({},c,{key:String(h),theme:T,code:P,language:I}),(function(e){var t,n=e.className,r=e.style,s=e.tokens,c=e.getLineProps,l=e.getTokenProps;return o.a.createElement("div",{className:C.a.codeBlockContainer},v&&o.a.createElement("div",{style:r,className:C.a.codeBlockTitle},v),o.a.createElement("div",{className:Object(i.a)(C.a.codeBlockContent,I)},o.a.createElement("div",{tabIndex:0,className:Object(i.a)(n,C.a.codeBlock,"thin-scrollbar",(t={},t[C.a.codeBlockWithTitle]=v,t))},o.a.createElement("div",{className:C.a.codeBlockLines,style:r},s.map((function(e,t){1===e.length&&""===e[0].content&&(e[0].content="\n");var n=c({line:e,key:t});return N.includes(t+1)&&(n.className=n.className+" docusaurus-highlight-code-line"),o.a.createElement("div",Object(a.a)({key:t},n),e.map((function(e,t){return o.a.createElement("span",Object(a.a)({key:t},l({token:e,key:t})))})))})))),o.a.createElement("button",{ref:O,type:"button","aria-label":Object(w.b)({id:"theme.CodeBlock.copyButtonAriaLabel",message:"Copy code to clipboard",description:"The ARIA label for copy code blocks button"}),className:Object(i.a)(C.a.copyButton),onClick:B},d?o.a.createElement(w.a,{id:"theme.CodeBlock.copied",description:"The copied button label on code blocks"},"Copied"):o.a.createElement(w.a,{id:"theme.CodeBlock.copy",description:"The copy button label on code blocks"},"Copy"))))}))}},561:function(e,t,n){"use strict";var a=n(0),r=n(562);t.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useThemeContext` is used outside of `Layout` Component. See https://docusaurus.io/docs/api/themes/configuration#usethemecontext.");return e}},562:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext(void 0);t.a=r},563:function(e,t){function n(e){let t,n=[];for(let a of e.split(",").map((e=>e.trim())))if(/^-?\d+$/.test(a))n.push(parseInt(a,10));else if(t=a.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){let[e,a,r,o]=t;if(a&&o){a=parseInt(a),o=parseInt(o);const e=a<o?1:-1;"-"!==r&&".."!==r&&"\u2025"!==r||(o+=e);for(let t=a;t!==o;t+=e)n.push(t)}}return n}t.default=n,e.exports=n},564:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(565),i=n.n(o),s=n(558),c=n(60),l=n.n(c),u=function(e,t){if(!e)return 0;var n=t.findIndex((function(t){return t.indexOf(e)>-1}));return-1===n?0:n};t.a=function(e){var t=e.src,n=e.title,o=Object(a.useState)(""),c=o[0],p=o[1];Object(a.useEffect)((function(){var n,a,r;i()(t.replace("github.com","raw.githubusercontent.com").replace("/blob/","/")).then((function(e){return e.text()})).then((n=e,a=n.startAt,r=n.endAt,function(e){var t=e.split("\n"),n=u(a,t);n>0&&(t=["// ..."].concat(t.slice(n,-1)));var o=u(r,t);return o>0&&(t=[].concat(t.slice(0,o+1),["// ..."])),t.join("\n")})).then(p).catch(console.error)}),[]);var d="language-"+function(e){var t=e.split(".").pop();switch(t){case"jsx":return"jsx";case"tsx":return"tsx";case"ts":return"typescript";case"go":return"go";case"yaml":case"yml":return"yaml";case"js":return"javascript";case"html":return"html";case"pug":return"pug";default:return t}}(t),b='title="'+(n||function(e){var t=e.match(new RegExp("https://github.com/[^/]+/[^/]+/blob/[^/]+/(.+)","i"))||[];return t.length>=2?t[1]:e}(t))+'"';return r.a.createElement("div",{className:l.a.container},r.a.createElement(s.a,{metastring:b,className:d,children:c}))}},565:function(e,t,n){"use strict";var a=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==a)return a;throw new Error("unable to locate global object")}();e.exports=t=a.fetch,a.fetch&&(t.default=a.fetch.bind(a)),t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response},573:function(e,t,n){var a={"./locale":557,"./locale.js":557};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=573}}]);