(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{193:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(8),o=(n(0),n(198)),s={title:"API Overview"},c={unversionedId:"concepts/api-overview",id:"concepts/api-overview",isDocsHomePage:!1,title:"API Overview",description:"This page gives an overview over all APIs Ory Keto offers, including common use",source:"@site/docs/concepts/api-overview.mdx",sourceDirName:"concepts",slug:"/concepts/api-overview",permalink:"/keto/docs/next/concepts/api-overview",editUrl:"https://github.com/ory/keto/edit/master/docs/docs/concepts/api-overview.mdx",version:"current",lastUpdatedBy:"Patrik",lastUpdatedAt:1616500045,formattedLastUpdatedAt:"3/23/2021",frontMatter:{title:"API Overview"},sidebar:"docs",previous:{title:"The Graph of Relations",permalink:"/keto/docs/next/concepts/graph-of-relations"},next:{title:"Internal Algorithms",permalink:"/keto/docs/next/concepts/internal-algorithms"}},i=[{value:"Read APIs",id:"read-apis",children:[{value:"List Relation Tuples",id:"list-relation-tuples",children:[]},{value:"Check Relation Tuple",id:"check-relation-tuple",children:[]},{value:"Expand Subject Sets",id:"expand-subject-sets",children:[]}]},{value:"Write APIs",id:"write-apis",children:[{value:"Change Relation Tuples",id:"change-relation-tuples",children:[]}]}],l={toc:i};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This page gives an overview over all APIs Ory Keto offers, including common use\ncases."),Object(o.b)("p",null,"The APIs are separated based on privileges into a ",Object(o.b)("inlineCode",{parentName:"p"},"read")," and ",Object(o.b)("inlineCode",{parentName:"p"},"write")," endpoint.\nEach endpoint is exposed on a different port, so\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/secure"},"you can decide how to restrict access"),". gRPC and REST connections\nare multiplexed on the same port."),Object(o.b)("p",null,"All APIs are available to gRPC and REST clients, although feature parity is not\nalways given. Because we follow gRPC and REST best practices and design\nguidelines, the APIs offer slightly different interfaces and capabilities."),Object(o.b)("h2",{id:"read-apis"},"Read APIs"),Object(o.b)("p",null,"The read-APIs are per default exposed on the TCP port ",Object(o.b)("inlineCode",{parentName:"p"},"4466"),"."),Object(o.b)("h3",{id:"list-relation-tuples"},"List Relation Tuples"),Object(o.b)("p",null,"This API allows you to query ",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/concepts/relation-tuples"},"relation tuples")," by\nproviding a partial relation tuple. It can be used to:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/keto/docs/next/guides/list-api-display-objects#listing-objects"},"list objects a user has access to")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/keto/docs/next/guides/list-api-display-objects#listing-subjects"},"list users who have a specific role")),Object(o.b)("li",{parentName:"ul"},"list users who are members of a specific group"),Object(o.b)("li",{parentName:"ul"},"audit permissions in the system")),Object(o.b)("p",null,"For more details, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/proto-api#readservice"},"gRPC API reference")," or\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/rest-api#query-relation-tuples"},"REST API reference"),"."),Object(o.b)("h3",{id:"check-relation-tuple"},"Check Relation Tuple"),Object(o.b)("p",null,"The check-API allows you to check whether a subject has a relation on an object.\nThis API resolves ",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/concepts/subjects#subject-sets"},"subject sets")," and\n",Object(o.b)("a",{parentName:"p",href:"https://github.com/ory/keto/issues/263"},"subject set rewrites"),"."),Object(o.b)("p",null,"This API is primarily used to\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/guides/simple-access-check-guide"},"check permissions to restrict actions"),"."),Object(o.b)("p",null,"For more details, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/proto-api#checkservice"},"gRPC API reference")," or\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/rest-api#check-a-relation-tuple"},"REST API reference"),"."),Object(o.b)("h3",{id:"expand-subject-sets"},"Expand Subject Sets"),Object(o.b)("p",null,"The expand-API recursively expands a ",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/concepts/subjects#subject-sets"},"subject set"),"\ninto a tree of subjects. For each subject, the tree assembles the relation\ntuples including the operands as defined in the\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/concepts/namespaces"},"namespace configuration"),". It can be used to:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"/keto/docs/next/guides/expand-api-display-who-has-access"},"list who has access to an object")),Object(o.b)("li",{parentName:"ul"},"determine why someone has access to an object"),Object(o.b)("li",{parentName:"ul"},"audit permissions in the system")),Object(o.b)("p",null,"An expand-request has to include the maximum depth of the tree to be returned.\nThis is required to ensure low latency and limit the resource usage per request.\nTo find out more about Ory Keto's performance, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/performance"},"performance considerations"),"."),Object(o.b)("p",null,"For more details, head over to the\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/proto-api#expandservice"},"gRPC API reference")," or\n",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/rest-api#getexpand"},"REST API reference"),"."),Object(o.b)("h2",{id:"write-apis"},"Write APIs"),Object(o.b)("p",null,"The write-APIs are per default exposed on the TCP port ",Object(o.b)("inlineCode",{parentName:"p"},"4467"),"."),Object(o.b)("h3",{id:"change-relation-tuples"},"Change Relation Tuples"),Object(o.b)("p",null,"The write-APIs offer multiple ways to insert and delete relation tuples. Please\nhead over to the ",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/proto-api#writeservice"},"gRPC API reference"),"\nor ",Object(o.b)("a",{parentName:"p",href:"/keto/docs/next/reference/rest-api#write"},"REST API reference")," to read more about the\navailable methods for each client type."),Object(o.b)("p",null,"In general, it is preferred to use the transaction based methods over repeatedly\ncalling simple methods for bulk updates. This is not only because they provide\nstronger consistency guarantees, but also because the database usually handles a\nsingle transaction with a lot of data faster than a lot of small transactions."),Object(o.b)("p",null,"The main use cases for the write-APIs are:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"setting up permissions for a new object"),Object(o.b)("li",{parentName:"ul"},"sharing an object with another user"),Object(o.b)("li",{parentName:"ul"},"revoking access to an object"),Object(o.b)("li",{parentName:"ul"},"transferring relations to an object to another user")))}p.isMDXComponent=!0},198:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,h=u["".concat(s,".").concat(d)]||u[d]||b[d]||o;return n?a.a.createElement(h,c(c({ref:t},l),{},{components:n})):a.a.createElement(h,c({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var l=2;l<o;l++)s[l]=n[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);